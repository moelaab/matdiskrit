<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US" dir="ltr" data-legacy-colorscheme="blue_red">
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Finite State Machines in Sage</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="book">
<meta property="book:title" content="Discrete Math with SageMath">
<meta property="book:author" content="Zunaid Ahmed, Hellen Colman, Samuel Lubliner">
<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script><script>
var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  "tex": {
    "inlineMath": [
      [
        "\\(",
        "\\)"
      ]
    ],
    "tags": "none",
    "tagSide": "right",
    "tagIndent": ".8em",
    "packages": {
      "[+]": [
        "base",
        "extpfeil",
        "ams",
        "amscd",
        "color",
        "newcommand",
        "knowl"
      ]
    }
  },
  "options": {
    "ignoreHtmlClass": "tex2jax_ignore|ignore-math",
    "processHtmlClass": "process-math",
    "renderActions": {
      "findScript": [
        10,
        function (doc) {
            document.querySelectorAll('script[type^="math/tex"]').forEach(function(node) {
                var display = !!node.type.match(/; *mode=display/);
                var math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                var text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = {node: text, delim: '', n: 0};
                math.end = {node: text, delim: '', n: 0};
                doc.math.push(math);
            });
        },
        ""
      ]
    }
  },
  "chtml": {
    "scale": 0.98,
    "mtextInheritFont": true
  },
  "loader": {
    "load": [
      "input/asciimath",
      "[tex]/extpfeil",
      "[tex]/amscd",
      "[tex]/color",
      "[tex]/newcommand",
      "[pretext]/mathjaxknowl3.js"
    ],
    "paths": {
      "pretext": "_static/pretext/js/lib"
    }
  },
  "startup": {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
  }
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script>// Make *any* div with class 'sagecell-sage' an executable Sage cell
// Their results will be linked, only within language type
sagecell.makeSagecell({
  "inputLocation": "div.sagecell-sage",
  "linked": true,
  "linkKey": "linked-sage",
  "autoeval": false,
  "languages": [
    "sage"
  ],
  "evalButtonText": "Evaluate (Sage)"
});
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js" integrity="sha512-4xUl/d6D6THrAnXAwGajXkoWaeMNwEKK4iNfq5DotEbLPAfk6FSxSP3ydNxqDgCw1c/0Z1Jg6L8h2j+++9BZmg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="lunr-pretext-search-index.js" async=""></script><script src="_static/pretext/js/pretext_search.js"></script><script src="_static/pretext/js/lib/jquery.min.js"></script><script src="_static/pretext/js/lib/jquery.sticky.js"></script><script src="_static/pretext/js/lib/jquery.espy.min.js"></script><script src="_static/pretext/js/pretext.js"></script><script src="_static/pretext/js/pretext_add_on.js?x=1"></script><script src="_static/pretext/js/user_preferences.js"></script><script src="_static/pretext/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
<link href="https://fonts.cdnfonts.com/css/dejavu-serif" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wdth,wght@75..100,300..800&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;" rel="stylesheet">
<link href="_static/pretext/css/theme.css" rel="stylesheet" type="text/css">
<link href="_static/pretext/css/ol-markers.css" rel="stylesheet" type="text/css">
<!--** eBookCongig is necessary to configure interactive       **-->
<!--** Runestone components to run locally in reader's browser **-->
<!--** No external communication:                              **-->
<!--**     log level is 0, Runestone Services are disabled     **-->
<script type="text/javascript">
eBookConfig = {};
eBookConfig.useRunestoneServices = false;
eBookConfig.host = 'http://127.0.0.1:8000';
eBookConfig.course = 'PTX_Course_Title_Here';
eBookConfig.basecourse = 'PTX_Base_Course';
eBookConfig.isLoggedIn = false;
eBookConfig.email = '';
eBookConfig.isInstructor = false;
eBookConfig.logLevel = 0;
eBookConfig.username = '';
eBookConfig.readings = null;
eBookConfig.activities = null;
eBookConfig.downloadsEnabled = false;
eBookConfig.allow_pairs = false;
eBookConfig.enableScratchAC = false;
eBookConfig.build_info = "";
eBookConfig.python3 = null;
eBookConfig.runestone_version = '7.5.6';
eBookConfig.jobehost = '';
eBookConfig.proxyuri_runs = '';
eBookConfig.proxyuri_files = '';
eBookConfig.enable_chatcodes =  false;
</script>
<!--*** Runestone Services ***-->
<script src="_static/prefix-runtime.82032a8574f6ce75.bundle.js"></script><script src="_static/prefix-723.3e6434f80549315a.bundle.js"></script><script src="_static/prefix-runestone.f6bda0c0ccce4835.bundle.js"></script><link rel="stylesheet" type="text/css" href="_static/prefix-723.3bccd435914aa0ff.css">
<link rel="stylesheet" type="text/css" href="_static/prefix-runestone.6a985cbf816db5c7.css">
</head>
<body id="changeme" class="pretext book ignore-math">
<a class="assistive" href="#ptx-content">Skip to main content</a><header id="ptx-masthead" class="ptx-masthead"><div class="ptx-banner"><div class="title-container">
<h1 class="heading"><a href="Discrete-Math-with-SageMath.html"><span class="title">Discrete Math with SageMath:</span> <span class="subtitle">Learn math with open-source software</span></a></h1>
<p class="byline">Zunaid Ahmed, Hellen Colman, Samuel Lubliner</p>
</div></div></header><nav id="ptx-navbar" class="ptx-navbar navbar"><div class="ptx-navbar-contents">
<button class="toc-toggle button" title="Contents"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5d2;</span><span class="name">Contents</span></button><a class="index-button button" href="backmatter-4.html" title="Index"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe88e;</span><span class="name">Index</span></a><div class="searchbox">
<div class="searchwidget"><button id="searchbutton" class="searchbutton button" type="button" title="Search book"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe8b6;</span><span class="name">Search Book</span></button></div>
<div id="searchresultsplaceholder" class="searchresultsplaceholder" style="display: none">
<div class="search-results-controls">
<input aria-label="Search term" id="ptxsearch" class="ptxsearch" type="text" name="terms" placeholder="Search term"><button title="Close search" id="closesearchresults" class="closesearchresults"><span class="material-symbols-outlined">close</span></button>
</div>
<h2 class="search-results-heading">Search Results: </h2>
<div id="searchempty" class="searchempty"><span>No results.</span></div>
<ol id="searchresults" class="searchresults"></ol>
</div>
</div>
<span class="nav-other-controls"></span><span class="treebuttons"><a class="previous-button button" href="sec-state-machine-definition.html" title="Previous"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cb;</span><span class="name">Prev</span></a><a class="up-button button" href="ch-finite-state-machines.html" title="Up"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5ce;</span><span class="name">Up</span></a><a class="next-button button" href="sec-fsm-in-action.html" title="Next"><span class="name">Next</span><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cc;</span></a></span>
</div></nav><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\N}{\mathbb N} \newcommand{\Z}{\mathbb Z} \newcommand{\Q}{\mathbb Q} \newcommand{\R}{\mathbb R}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<div class="ptx-page">
<div id="ptx-sidebar" class="ptx-sidebar"><nav id="ptx-toc" class="ptx-toc depth2"><ul class="structural toc-item-list contains-active">
<li class="toc-item toc-frontmatter">
<div class="toc-title-box"><a href="frontmatter.html" class="internal"><span class="title">Front Matter</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-preface"><div class="toc-title-box"><a href="frontmatter-3.html" class="internal"><span class="title">Preface</span></a></div></li>
<li class="toc-item toc-acknowledgement"><div class="toc-title-box"><a href="frontmatter-4.html" class="internal"><span class="title">Acknowledgements</span></a></div></li>
<li class="toc-item toc-preface"><div class="toc-title-box"><a href="frontmatter-5.html" class="internal"><span class="title">From the Student Authors</span></a></div></li>
<li class="toc-item toc-preface">
<div class="toc-title-box"><a href="authors.html" class="internal"><span class="title">Authors and Contributors</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-contributors"><div class="toc-title-box"><a href="authors.html#authors-2" class="internal"><span class="title"></span></a></div></li></ul>
</li>
<li class="toc-item toc-colophon"><div class="toc-title-box"><a href="front-colophon.html" class="internal"><span class="title">Colophon</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-getting-started.html" class="internal"><span class="codenumber">1</span> <span class="title">Getting Started</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="about-sage.html" class="internal"><span class="codenumber">1.1</span> <span class="title">Intro to Sage</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="about-sage.html#subsec-Sage-as-a-Calculator" class="internal"><span class="codenumber">1.1.1</span> <span class="title">Sage as a Calculator</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="about-sage.html#subsec-Variables-and-Names" class="internal"><span class="codenumber">1.1.2</span> <span class="title">Variables and Names</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="displaying.html" class="internal"><span class="codenumber">1.2</span> <span class="title">Display Values</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="OOP.html" class="internal"><span class="codenumber">1.3</span> <span class="title">Object-Oriented Programming</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="data-types.html" class="internal"><span class="codenumber">1.4</span> <span class="title">Data Types</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="iteration.html" class="internal"><span class="codenumber">1.5</span> <span class="title">Iteration</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="debugging.html" class="internal"><span class="codenumber">1.6</span> <span class="title">Debugging</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="defining-functions.html" class="internal"><span class="codenumber">1.7</span> <span class="title">Defining Functions</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="documentation.html" class="internal"><span class="codenumber">1.8</span> <span class="title">Documentation</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="sage-browser.html" class="internal"><span class="codenumber">1.9</span> <span class="title">Run Sage in the browser</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-set-theory.html" class="internal"><span class="codenumber">2</span> <span class="title">Set Theory</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="creating-sets.html" class="internal"><span class="codenumber">2.1</span> <span class="title">Creating Sets</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="creating-sets.html#subsec-Ways-to-create-a-set" class="internal"><span class="codenumber">2.1.1</span> <span class="title">Set Definitions</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="creating-sets.html#subsec-set-builder-notation" class="internal"><span class="codenumber">2.1.2</span> <span class="title">Set Builder Notation</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="creating-sets.html#subsec-subsets" class="internal"><span class="codenumber">2.1.3</span> <span class="title">Subsets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="creating-sets.html#creating-sets-5" class="internal"><span class="codenumber">2.1.4</span> <span class="title">Set Membership Check</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="cardinality.html" class="internal"><span class="codenumber">2.2</span> <span class="title">Cardinality</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-operation-on-sets.html" class="internal"><span class="codenumber">2.3</span> <span class="title">Operations on Sets</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-2" class="internal"><span class="codenumber">2.3.1</span> <span class="title">Union of Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-3" class="internal"><span class="codenumber">2.3.2</span> <span class="title">Intersection of Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-4" class="internal"><span class="codenumber">2.3.3</span> <span class="title">Difference of Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-5" class="internal"><span class="codenumber">2.3.4</span> <span class="title">Multiple Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-6" class="internal"><span class="codenumber">2.3.5</span> <span class="title">Complement of Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-7" class="internal"><span class="codenumber">2.3.6</span> <span class="title">Cartesian Product of Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#sec-operation-on-sets-8" class="internal"><span class="codenumber">2.3.7</span> <span class="title">Power Sets</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-operation-on-sets.html#subsec-Viewing-Power-Sets" class="internal"><span class="codenumber">2.3.8</span> <span class="title">Viewing Power Sets</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-combinatorics.html" class="internal"><span class="codenumber">3</span> <span class="title">Combinatorics</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-combinatorics.html" class="internal"><span class="codenumber">3.1</span> <span class="title">Combinatorics</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-combinatorics.html#sec-combinatorics-2" class="internal"><span class="codenumber">3.1.1</span> <span class="title">Factorial Function</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-combinatorics.html#sec-combinatorics-3" class="internal"><span class="codenumber">3.1.2</span> <span class="title">Combinations</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-combinatorics.html#sec-combinatorics-4" class="internal"><span class="codenumber">3.1.3</span> <span class="title">Permutations</span></a></div></li>
</ul>
</li></ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-logic.html" class="internal"><span class="codenumber">4</span> <span class="title">Logic</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-logical-operation.html" class="internal"><span class="codenumber">4.1</span> <span class="title">Logical Operators</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-logical-operation.html#sec-logical-operation-8" class="internal"><span class="codenumber">4.1.1</span> <span class="title">Boolean Formula</span></a></div></li></ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="sec-truth-table.html" class="internal"><span class="codenumber">4.2</span> <span class="title">Truth Tables</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-tautology.html" class="internal"><span class="codenumber">4.3</span> <span class="title">Analyzing Logical Equivalences</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-tautology.html#sec-tautology-2" class="internal"><span class="codenumber">4.3.1</span> <span class="title">Equivalent Statements</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-tautology.html#sec-tautology-3" class="internal"><span class="codenumber">4.3.2</span> <span class="title">Tautologies</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-tautology.html#sec-tautology-4" class="internal"><span class="codenumber">4.3.3</span> <span class="title">Contradictions</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-relations.html" class="internal"><span class="codenumber">5</span> <span class="title">Relations</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="intro-relations.html" class="internal"><span class="codenumber">5.1</span> <span class="title">Introduction to Relations</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="relations-on-a-set.html" class="internal"><span class="codenumber">5.2</span> <span class="title">Relations on a set</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="digraphs.html" class="internal"><span class="codenumber">5.3</span> <span class="title">Digraphs</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="properties.html" class="internal"><span class="codenumber">5.4</span> <span class="title">Properties</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="properties.html#subsec-reflexive" class="internal"><span class="codenumber">5.4.1</span> <span class="title">Reflexive</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="properties.html#subsec-symmetric" class="internal"><span class="codenumber">5.4.2</span> <span class="title">Symmetric</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="properties.html#subsec-anti-symmetric" class="internal"><span class="codenumber">5.4.3</span> <span class="title">Antisymmetric</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="properties.html#subsec-transitive" class="internal"><span class="codenumber">5.4.4</span> <span class="title">Transitive</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="equivalence.html" class="internal"><span class="codenumber">5.5</span> <span class="title">Equivalence</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="partial-order.html" class="internal"><span class="codenumber">5.6</span> <span class="title">Partial Order</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-functions.html" class="internal"><span class="codenumber">6</span> <span class="title">Functions</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-functions.html" class="internal"><span class="codenumber">6.1</span> <span class="title">Functions</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-functions.html#sec-functions-4" class="internal"><span class="codenumber">6.1.1</span> <span class="title">Graphical Representations</span></a></div></li></ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-recursion.html" class="internal"><span class="codenumber">6.2</span> <span class="title">Recursion</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-recursion.html#sec-recursion-4" class="internal"><span class="codenumber">6.2.1</span> <span class="title">Recursion in Sequences</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-recursion.html#sec-recursion-5" class="internal"><span class="codenumber">6.2.2</span> <span class="title">Recursion with Binomial Coefficients</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-graph-theory.html" class="internal"><span class="codenumber">7</span> <span class="title">Graph Theory</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-basics.html" class="internal"><span class="codenumber">7.1</span> <span class="title">Basics</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-basics.html#sec-basics-2" class="internal"><span class="codenumber">7.1.1</span> <span class="title">Graph Definition</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-basics.html#sec-basics-3" class="internal"><span class="codenumber">7.1.2</span> <span class="title">Weighted Graphs</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-basics.html#sec-basics-4" class="internal"><span class="codenumber">7.1.3</span> <span class="title">Graph Characteristics</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-basics.html#sec-basics-5" class="internal"><span class="codenumber">7.1.4</span> <span class="title">Graphs and Matrices</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-basics.html#sec-basics-6" class="internal"><span class="codenumber">7.1.5</span> <span class="title">Manipulating Graphs in Sage</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-plot-options.html" class="internal"><span class="codenumber">7.2</span> <span class="title">Plot Options</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-Size" class="internal"><span class="codenumber">7.2.1</span> <span class="title">Size</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-Edge-Labels" class="internal"><span class="codenumber">7.2.2</span> <span class="title">Edge Labels</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-Color" class="internal"><span class="codenumber">7.2.3</span> <span class="title">Color</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-Layout" class="internal"><span class="codenumber">7.2.4</span> <span class="title">Layout</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-View-in-New-Tab" class="internal"><span class="codenumber">7.2.5</span> <span class="title">View in a New Tab</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-Edge-Style" class="internal"><span class="codenumber">7.2.6</span> <span class="title">Edge Style</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-plot-options.html#subsec-3-Dimensional" class="internal"><span class="codenumber">7.2.7</span> <span class="title">3-Dimensional</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="paths.html" class="internal"><span class="codenumber">7.3</span> <span class="title">Paths</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="isomorphism.html" class="internal"><span class="codenumber">7.4</span> <span class="title">Isomorphism</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="euler-and-hamilton.html" class="internal"><span class="codenumber">7.5</span> <span class="title">Euler and Hamilton</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="euler-and-hamilton.html#subsec-Euler" class="internal"><span class="codenumber">7.5.1</span> <span class="title">Euler</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="euler-and-hamilton.html#subsec-Hamilton" class="internal"><span class="codenumber">7.5.2</span> <span class="title">Hamilton</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-graphs-in-action.html" class="internal"><span class="codenumber">7.6</span> <span class="title">Graphs in Action</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-graphs-in-action.html#subsec-Bike-Courier-Delivery-Route-Problem" class="internal"><span class="codenumber">7.6.1</span> <span class="title">Bike Courier Delivery Route Problem</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-graphs-in-action.html#subsec-locations" class="internal"><span class="codenumber">7.6.2</span> <span class="title">Locations</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-graphs-in-action.html#subsec-Graph" class="internal"><span class="codenumber">7.6.3</span> <span class="title">Graph</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-trees.html" class="internal"><span class="codenumber">8</span> <span class="title">Trees</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="definitions-and-theorems.html" class="internal"><span class="codenumber">8.1</span> <span class="title">Definitions and Theorems</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="search-algorithms.html" class="internal"><span class="codenumber">8.2</span> <span class="title">Search Algorithms</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-trees-in-action.html" class="internal"><span class="codenumber">8.3</span> <span class="title">Trees in Action</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-trees-in-action.html#subsec-Railway-Problem" class="internal"><span class="codenumber">8.3.1</span> <span class="title">Railway Problem</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-trees-in-action.html#subsec-location-distances" class="internal"><span class="codenumber">8.3.2</span> <span class="title">Location Distances</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-trees-in-action.html#subsec-CCC-Graph" class="internal"><span class="codenumber">8.3.3</span> <span class="title">Graph</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-trees-in-action.html#subsec-Railway" class="internal"><span class="codenumber">8.3.4</span> <span class="title">Railway</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-trees-in-action.html#subsec-Conclusion" class="internal"><span class="codenumber">8.3.5</span> <span class="title">Conclusion</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-lattices.html" class="internal"><span class="codenumber">9</span> <span class="title">Lattices</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-definition.html" class="internal"><span class="codenumber">9.1</span> <span class="title">Lattices</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-definition.html#definition" class="internal"><span class="codenumber">9.1.1</span> <span class="title">Definition</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-definition.html#join" class="internal"><span class="codenumber">9.1.2</span> <span class="title">Join</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-definition.html#meet" class="internal"><span class="codenumber">9.1.3</span> <span class="title">Meet</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-definition.html#subsec-Divisor-Lattice" class="internal"><span class="codenumber">9.1.4</span> <span class="title">Divisor Lattice</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-tables-of-operations.html" class="internal"><span class="codenumber">9.2</span> <span class="title">Tables of Operations</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-tables-of-operations.html#meet-operation-table" class="internal"><span class="codenumber">9.2.1</span> <span class="title">Meet Operation Table</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-tables-of-operations.html#join-operation-table" class="internal"><span class="codenumber">9.2.2</span> <span class="title">Join Operation Table</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-boolean-algebra.html" class="internal"><span class="codenumber">10</span> <span class="title">Boolean Algebra</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="sec-boolean-algebra.html" class="internal"><span class="codenumber">10.1</span> <span class="title">Boolean Algebra</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="sec-boolean-functions.html" class="internal"><span class="codenumber">10.2</span> <span class="title">Boolean functions</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="ch-logic-gates.html" class="internal"><span class="codenumber">11</span> <span class="title">Logic Gates</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-intro-logic-gates.html" class="internal"><span class="codenumber">11.1</span> <span class="title">Logic Gates</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-AND-Gate" class="internal"><span class="codenumber">11.1.1</span> <span class="title">AND Gate</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-OR-GATE" class="internal"><span class="codenumber">11.1.2</span> <span class="title">OR GATE</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-NOT-Gate" class="internal"><span class="codenumber">11.1.3</span> <span class="title">NOT Gate</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-NAND-Gate" class="internal"><span class="codenumber">11.1.4</span> <span class="title">NAND Gate</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-NOR-Gate" class="internal"><span class="codenumber">11.1.5</span> <span class="title">NOR Gate</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-XOR-Gate" class="internal"><span class="codenumber">11.1.6</span> <span class="title">XOR Gate</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-intro-logic-gates.html#subsec-XNOR-Gate" class="internal"><span class="codenumber">11.1.7</span> <span class="title">XNOR Gate</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="sec-combined-logic-gates.html" class="internal"><span class="codenumber">11.2</span> <span class="title">Combinations of Logic Gates</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-practical-applications.html" class="internal"><span class="codenumber">11.3</span> <span class="title">Logic Gates in Action</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-practical-applications.html#sec-vote-encoder" class="internal"><span class="codenumber">11.3.1</span> <span class="title">Vote Encoder</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-practical-applications.html#sec-vote-counter" class="internal"><span class="codenumber">11.3.2</span> <span class="title">Vote Counter</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-practical-applications.html#sec-majority-decider" class="internal"><span class="codenumber">11.3.3</span> <span class="title">Majority Decider</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-practical-applications.html#sec-complete-voting-machine" class="internal"><span class="codenumber">11.3.4</span> <span class="title">Combining Everything: The Complete Voting Machine</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter contains-active">
<div class="toc-title-box"><a href="ch-finite-state-machines.html" class="internal"><span class="codenumber">12</span> <span class="title">Finite State Machines</span></a></div>
<ul class="structural toc-item-list contains-active">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-state-machine-definition.html" class="internal"><span class="codenumber">12.1</span> <span class="title">Definitions and Components</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-state-machine-definition.html#sm-definition" class="internal"><span class="codenumber">12.1.1</span> <span class="title">Mealy State Machine</span></a></div></li>
<li class="toc-item toc-subsection">
<div class="toc-title-box"><a href="sec-state-machine-definition.html#sec-state-machine-definition-4" class="internal"><span class="codenumber">12.1.2</span> <span class="title">Other Types of Finite State Machines</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="sec-state-machine-definition.html#sec-state-machine-definition-4-2" class="internal"><span class="codenumber">12.1.2.1</span> <span class="title">Moore Machine</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="sec-state-machine-definition.html#sec-state-machine-definition-4-3" class="internal"><span class="codenumber">12.1.2.2</span> <span class="title">Finite-State Automaton</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="sec-state-machine-definition.html#sec-state-machine-definition-4-4" class="internal"><span class="codenumber">12.1.2.3</span> <span class="title">Deterministic Finite Automaton (DFA)</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="sec-state-machine-definition.html#sec-state-machine-definition-4-5" class="internal"><span class="codenumber">12.1.2.4</span> <span class="title">Nondeterministic Finite Automaton (NFA)</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="sec-state-machine-definition.html#sec-state-machine-definition-4-6" class="internal"><span class="codenumber">12.1.2.5</span> <span class="title">Turing Machine</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-section contains-active">
<div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html" class="internal"><span class="codenumber">12.2</span> <span class="title">Finite State Machines in Sage</span></a></div>
<ul class="structural toc-item-list active">
<li class="toc-item toc-subsection">
<div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-4" class="internal"><span class="codenumber">12.2.1</span> <span class="title">The Elevator State Machine</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-4-4" class="internal"><span class="codenumber">12.2.1.1</span> <span class="title">Description of the Elevator FSM</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-4-5" class="internal"><span class="codenumber">12.2.1.2</span> <span class="title">Elements of the Elevator FSM</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-4-6" class="internal"><span class="codenumber">12.2.1.3</span> <span class="title">Graph Model of the Elevator FSM</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-4-7" class="internal"><span class="codenumber">12.2.1.4</span> <span class="title">Run the Elevator State Machine</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-subsection">
<div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-5" class="internal"><span class="codenumber">12.2.2</span> <span class="title">The Traffic Light State Machine</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-5-4" class="internal"><span class="codenumber">12.2.2.1</span> <span class="title">Description of the Traffic Light FSM</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-5-5" class="internal"><span class="codenumber">12.2.2.2</span> <span class="title">Using `FiniteStateMachine’ Module</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-modeling-finite-state-machines.html#sec-modeling-finite-state-machines-5-6" class="internal"><span class="codenumber">12.2.2.3</span> <span class="title">Using `Transducer’ Module</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="sec-fsm-in-action.html" class="internal"><span class="codenumber">12.3</span> <span class="title">State Machine in Action</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-fsm-in-action.html#sec-fsm-in-action-4" class="internal"><span class="codenumber">12.3.1</span> <span class="title">Traffic Light Controller: Problem Overview</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-fsm-in-action.html#sec-fsm-in-action-5" class="internal"><span class="codenumber">12.3.2</span> <span class="title">Elements of the FSM Model</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-fsm-in-action.html#sec-fsm-in-action-6" class="internal"><span class="codenumber">12.3.3</span> <span class="title">Construct the FSM</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-fsm-in-action.html#sec-fsm-in-action-7" class="internal"><span class="codenumber">12.3.4</span> <span class="title">Display the State Transition Graph</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="sec-fsm-in-action.html#sec-fsm-in-action-8" class="internal"><span class="codenumber">12.3.5</span> <span class="title">Simulate a Full Cycle Run of the FSM</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-backmatter">
<div class="toc-title-box"><a href="backmatter.html" class="internal"><span class="title">Back Matter</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-references"><div class="toc-title-box"><a href="refs.html" class="internal"><span class="title">References</span></a></div></li>
<li class="toc-item toc-colophon"><div class="toc-title-box"><a href="backmatter-3.html" class="internal"><span class="title">Colophon</span></a></div></li>
<li class="toc-item toc-index"><div class="toc-title-box"><a href="backmatter-4.html" class="internal"><span class="title">Index</span></a></div></li>
</ul>
</li>
</ul></nav></div>
<main class="ptx-main"><div id="ptx-content" class="ptx-content"><section class="section" id="sec-modeling-finite-state-machines"><h2 class="heading hide-type">
<span class="type">Section</span><span class="space"> </span><span class="codenumber">12.2</span><span class="space"> </span><span class="title">Finite State Machines in Sage</span>
</h2>
<section class="introduction" id="sec-modeling-finite-state-machines-3"><div class="para" id="sec-modeling-finite-state-machines-3-1">Although Sage includes a dedicated built-in rich module to handle various types of state machines, it may not always be sufficient to address certain use cases or implement specific custom behaviors of the machine. Additionally, the built-in module allows state machines to be defined and constructed in different ways, providing greater flexibility and making it more suitable from a programmer’s perspective. However, it may not fully conform to the precise definition given earlier. This highlights that it is still possible to model, construct, display, and run relatively simple state machines by utilizing general-purpose tools, such as graphs and transition matrices, to represent and operate on state machines.</div>
<aside class="aside aside-like" id="sec-modeling-finite-state-machines-3-2"><h3 class="heading"><span class="title">Notes.</span></h3>
<div class="para" id="sec-modeling-finite-state-machines-3-2-2">While Sage provides basic tools to represent and simulate state machines, it may not natively support more complex state machine features such as parallel states or hierarchical transitions.</div></aside></section><section class="subsection" id="sec-modeling-finite-state-machines-4"><h3 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.1</span><span class="space"> </span><span class="title">The Elevator State Machine</span>
</h3>
<div class="para" id="sec-modeling-finite-state-machines-4-2">Let’s design a basic controller to an elevator to show the process of defining states, creating a state transition graph, visualizing the state machine, and simulating its execution in Sage.</div>
<div class="para" id="sec-modeling-finite-state-machines-4-3">Consider a 3-level elevator (floors 1 through 3). The elevator has 3 buttons for users to select the destination floor (only one can be selected at a time). Depending on the current position and the selected floor, the elevator can go up, go down, or remain on the same floor.</div>
<section class="subsection" id="sec-modeling-finite-state-machines-4-4"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.1.1</span><span class="space"> </span><span class="title">Description of the Elevator FSM</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-4-4-2">This elevator system can be modeled and simulated using a finite-state machine with states <span class="process-math">\(S=\{f_1, f_2, f_3\}\)</span> representing each floor, the user inputs set <span class="process-math">\(X=\{b_1, b_2, b_3\}\)</span> (where <span class="process-math">\(b_i\)</span> represents the button for <span class="process-math">\(i^{th}\)</span> floor), and the outputs set <span class="process-math">\(Z=\{U, D, N\}\)</span> for ’going up’, ’going down’, or ’going nowhere’.</div>
<div class="para" id="sec-modeling-finite-state-machines-4-4-3">The components of this FSM are transcribed in the following table.</div>
<div class="para" id="sec-modeling-finite-state-machines-4-4-4"><figure class="table table-like" id="sec-modeling-finite-state-machines-4-4-4-1"><figcaption><span class="type">Table</span><span class="space"> </span><span class="codenumber">12.2.1<span class="period">.</span></span><span class="space"> </span>The Elevator State Machine Definition</figcaption><div class="tabular-box natural-width"><table class="tabular">
<tr class="header-horizontal">
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines">next</th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines">output</th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
</tr>
<tr class="header-horizontal">
<th scope="col" class="c m b1 r0 l0 t0 lines">current</th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(b_1\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(b_2\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(b_3\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(b_1\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(b_2\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(b_3\)</span></th>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_1\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_1\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_2\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_3\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(N\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(U\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(U\)</span></td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_2\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_1\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_2\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_3\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(D\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(N\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(U\)</span></td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_3\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_1\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_2\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(f_3\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(D\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(D\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(N\)</span></td>
</tr>
</table></div></figure></div>
<div class="para logical" id="sec-modeling-finite-state-machines-4-4-5">
<div class="para">The following steps outline the approach to build and test the elevator controller system:</div>
<ol class="decimal" id="sec-modeling-finite-state-machines-4-4-5-1">
<li id="sec-modeling-finite-state-machines-4-4-5-1-1"><div class="para" id="sec-modeling-finite-state-machines-4-4-5-1-1-1">Define the elements of the Finite State Machine: States, Inputs, Transitions, and Outputs.</div></li>
<li id="sec-modeling-finite-state-machines-4-4-5-1-2"><div class="para" id="sec-modeling-finite-state-machines-4-4-5-1-2-1">Construct the State Machine.</div></li>
<li id="sec-modeling-finite-state-machines-4-4-5-1-3"><div class="para" id="sec-modeling-finite-state-machines-4-4-5-1-3-1">Run the machine using a sample input set.</div></li>
</ol>
</div></section><section class="subsection" id="sec-modeling-finite-state-machines-4-5"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.1.2</span><span class="space"> </span><span class="title">Elements of the Elevator FSM</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-4-5-2">The first step is to define the states and transitions in the state machine, which can be represented using lists and dictionaries.</div>
<div id="sec-modeling-finite-state-machines-4-5-3" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># Define state, input and output sets
states = ['f1', 'f2', 'f3']
inputs = ['b1', 'b2', 'b3']
outputs = ['U', 'D', 'N']

# Transitions as a dictionary {(current_state, input): next_state}
transitions = {
    ('f1', 'b1'): 'f1',
    ('f1', 'b2'): 'f2',
    ('f1', 'b3'): 'f3',

    ('f2', 'b1'): 'f1',
    ('f2', 'b2'): 'f2',
    ('f2', 'b3'): 'f3',

    ('f3', 'b1'): 'f1',
    ('f3', 'b2'): 'f2',
    ('f3', 'b3'): 'f3',
}

# The machine outputs control how the elevator would move
outputs = {
    ('f1', 'b1'): 'N',
    ('f1', 'b2'): 'U',
    ('f1', 'b3'): 'U',

    ('f2', 'b1'): 'D',
    ('f2', 'b2'): 'N',
    ('f2', 'b3'): 'U',

    ('f3', 'b1'): 'D',
    ('f3', 'b2'): 'D',
    ('f3', 'b3'): 'N',
}

# Display the machine configuration
print('States: ', states)
print('Transitions: ', transitions)
print('Outputs: ', outputs)
</script></div></section><section class="subsection" id="sec-modeling-finite-state-machines-4-6"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.1.3</span><span class="space"> </span><span class="title">Graph Model of the Elevator FSM</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-4-6-2">An FSM can be modeled as a graph where vertices represent the states, and the directed edge between vertices is the relationship between two states (the transition from one state to the other). The weight of a directed edge between two vertices represents the pair of input and output associated with the transition between the two states.</div>
<div class="para" id="sec-modeling-finite-state-machines-4-6-3">In Sage, the <code class="code-inline tex2jax_ignore">DiGraph</code> class can be used to represent the states, transitions, and outputs of the state machine as a directed graph, leveraging the graph structure to visualize the state machine representation.</div>
<div id="sec-modeling-finite-state-machines-4-6-4" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># 'DiGraph' is imported by default. If not, it can be imported as follow
# from sage.graphs.digraph import DiGraph

# Initialize a directed graph
elevator_fsm = DiGraph(loops=True)

# Add states as vertices
elevator_fsm.add_vertices(states)

# Add transitions and outputs as edges
for (_state, _input), next_state in transitions.items():
    _output = outputs[(_state, _input)]
    edge_label = f"{_input}, {_output}"
    elevator_fsm.add_edge(_state, next_state, label=edge_label)

# Display the graph (state machine)
elevator_fsm.show(
        figsize=[5.6, 5.6],
        layout='circular',
        vertex_size=250,
        edge_labels=True,
        vertex_labels=True,
        edge_color=(.2,.4,1),
        edge_thickness=1.0,
)
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-4-6-5">The <code class="code-inline tex2jax_ignore">show()</code> method renders a graphical representation of the state machine. Each vertex in the graph represents a state, and each directed edge represents a transition, labeled as (input, output).</div></section><section class="subsection" id="sec-modeling-finite-state-machines-4-7"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.1.4</span><span class="space"> </span><span class="title">Run the Elevator State Machine</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-4-7-2">Next, the state machine’s behavior can be simulated by defining a function that processes a list of inputs and transitions through the states accordingly.</div>
<div id="sec-modeling-finite-state-machines-4-7-3" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># Function to run the state machine
def run_state_machine(start_state, inputs):
    current_state = start_state
    for _input in inputs:
        print(f"Current state: {current_state}, Input: {_input}")

        if (current_state, _input) in transitions:
            current_output = outputs[(current_state, _input)]
            current_state = transitions[(current_state, _input)]
            print(
                f"Transitioned to: {current_state}\n"
                f"Output: {current_output}\n"
            )
        else:
            print(
                f"No transition/output available for input {_input} in state {current_state}"
            )
            break

    print(f"Last state: {current_state}")

# Example of running the state machine
start_state = 'f2'
inputs = ['b1', 'b1', 'b3', 'b2']

run_state_machine(start_state, inputs)
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-4-7-4">The <code class="code-inline tex2jax_ignore">run_state_machine()</code> function simulates the state machine by processing a list of inputs starting from an initial state.</div></section></section><section class="subsection" id="sec-modeling-finite-state-machines-5"><h3 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.2</span><span class="space"> </span><span class="title">The Traffic Light State Machine</span>
</h3>
<div class="para" id="sec-modeling-finite-state-machines-5-2">Let’s design a simple traffic light controller to illustrate alternative methods for defining, visualizing, and executing finite state machines in Sage.</div>
<div class="para logical" id="sec-modeling-finite-state-machines-5-3">
<div class="para">Consider a simplified traffic light system controlled by preset timers. This system operates through three phases that represent the flow of road traffic: Free-flowing, Slowing-down, and Halted. These phases correspond to the traffic light signals: green, yellow, and red, controlling the flow of traffic. The system uses three timer settings: 30 seconds, 20 seconds, and 5 seconds. When a timer expires, it triggers the transition to the next phase. Initially, the light is green, the traffic is flowing, and:</div>
<ul class="disc" id="sec-modeling-finite-state-machines-5-3-1">
<li id="sec-modeling-finite-state-machines-5-3-1-1"><div class="para" id="sec-modeling-finite-state-machines-5-3-1-1-1">When the 30-second timer expires, the traffic light changes from green to yellow, and traffic begins to slow down.</div></li>
<li id="sec-modeling-finite-state-machines-5-3-1-2"><div class="para" id="sec-modeling-finite-state-machines-5-3-1-2-1">When the 5-second timer expires, the traffic light changes from yellow to red, bringing traffic to a complete stop.</div></li>
<li id="sec-modeling-finite-state-machines-5-3-1-3"><div class="para" id="sec-modeling-finite-state-machines-5-3-1-3-1">When the 20-second timer expires, the traffic light changes from red to green, allowing traffic to start moving again.</div></li>
</ul>
</div>
<section class="subsection" id="sec-modeling-finite-state-machines-5-4"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.2.1</span><span class="space"> </span><span class="title">Description of the Traffic Light FSM</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-5-4-2">In this traffic light system, the three phases representing the flow of road traffic: <em class="emphasis">Free-flowing (F)</em>, <em class="emphasis">Slowing-down (S)</em>, and <em class="emphasis">Halted (H)</em> are the states <span class="process-math">\(S=\{F, S, H\}\)</span> of the FSM. These phases correspond to the traffic light signals: green (G), yellow (Y), and red (R), which are the outputs set <span class="process-math">\(Z=\{G, Y, R\}\)</span> of the system. The timers driving the transitions are the inputs set <span class="process-math">\(X=\{t_{5s}, t_{20s}, t_{30s}\}\)</span> of this traffic light system.</div>
<div class="para" id="sec-modeling-finite-state-machines-5-4-3">The following table summarize the elements of the traffic light FSM.</div>
<div class="para" id="sec-modeling-finite-state-machines-5-4-4"><figure class="table table-like" id="sec-modeling-finite-state-machines-5-4-4-1"><figcaption><span class="type">Table</span><span class="space"> </span><span class="codenumber">12.2.2<span class="period">.</span></span><span class="space"> </span>The Traffic Light State Machine Definition</figcaption><div class="tabular-box natural-width"><table class="tabular">
<tr class="header-horizontal">
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines">next</th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
<th scope="col" class="c m b3 r0 l0 t0 lines">output</th>
<th scope="col" class="c m b3 r0 l0 t0 lines"></th>
</tr>
<tr class="header-horizontal">
<th scope="col" class="c m b1 r0 l0 t0 lines">current</th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(t_{5s}\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(t_{20s}\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(t_{30s}\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(t_{5s}\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(t_{20s}\)</span></th>
<th scope="col" class="c m b1 r0 l0 t0 lines"><span class="process-math">\(t_{30s}\)</span></th>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(F\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(F\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(F\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(S\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(G\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(G\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(Y\)</span></td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(S\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(H\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(S\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(S\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(R\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(Y\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(Y\)</span></td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(H\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(H\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(F\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(H\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(R\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(G\)</span></td>
<td class="c m b0 r0 l0 t0 lines"><span class="process-math">\(R\)</span></td>
</tr>
</table></div></figure></div>
<div class="para" id="sec-modeling-finite-state-machines-5-4-5">By applying the same steps and approach as in the previous section, the traffic light controller system will be built and tested, this time utilizing the Sage built-in module and functions.</div></section><section class="subsection" id="sec-modeling-finite-state-machines-5-5"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.2.2</span><span class="space"> </span><span class="title">Using `FiniteStateMachine’ Module</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-5-5-2">Sage <code class="code-inline tex2jax_ignore">FiniteStateMachine</code> built-in library provides a powerful tool to model, construct as well as simulate state machines of various systems. This module will be leveraged to showcase its capabilities on the given example, and demonstrating how it can be used to construct and display the FSM, manage its state transitions and outputs.</div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-3">The command <code class="code-inline tex2jax_ignore">FiniteStateMachine()</code> constructs an <em class="emphasis">empty</em> state machine (no states, no transitions).</div>
<div id="sec-modeling-finite-state-machines-5-5-4" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">from sage.combinat.finite_state_machine import FSMState

# FSM states, inputs and outputs
states = ['F', 'S', 'H']         # Free-flowing, Slowing-down, Halted
inputs = ['t30s', 't5s', 't20s'] # timer durations before state transitions
outputs = ['G', 'Y', 'R']        # traffic light: Green, Yellow, Red

# Create an empty state machine object
traffic_light_fsm = FiniteStateMachine()
traffic_light_fsm
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-5">The function <code class="code-inline tex2jax_ignore">FSMState()</code> defines a state for a given label. The <code class="code-inline tex2jax_ignore">is_initial</code> flag can be set to true to set the current state as the <em class="emphasis">initial state</em> of the finite state machine. The method <code class="code-inline tex2jax_ignore">add_state()</code> appends the created state to an existing state machine.</div>
<div id="sec-modeling-finite-state-machines-5-5-6" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># Define a new state then adding it
free_flowing = FSMState('F', is_initial=True)
traffic_light_fsm.add_state(free_flowing)

# Adding more states by their labels (saving state handlers, to use them in state transitions)
slowing_down = traffic_light_fsm.add_state('S')
halted = traffic_light_fsm.add_state('H')

# the FiniteStateMachine instance
traffic_light_fsm
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-7">To check whether or not a finite state machine has a state defined, <code class="code-inline tex2jax_ignore">has_state()</code> method can be used by passing in the state label (case-sensitive).</div>
<div id="sec-modeling-finite-state-machines-5-5-8" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_fsm.has_state('F')
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-9">The function <code class="code-inline tex2jax_ignore">states()</code> enumerates the list of all defined states of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-5-10" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_fsm.states()
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-11">The method <code class="code-inline tex2jax_ignore">initial_states()</code> lists the defined initial state(s) of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-5-12" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_fsm.initial_states()
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-13">To define a new transition between two states (as well as the input triggering the transition, and the output associated with the state transition), the method <code class="code-inline tex2jax_ignore">FSMTransition()</code> can be used. The method <code class="code-inline tex2jax_ignore">add_transition()</code> attaches the defined transition to the state machine, and the function <code class="code-inline tex2jax_ignore">transitions()</code> enumerates the list of all defined transitions of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-5-14" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">from sage.combinat.finite_state_machine import FSMTransition

# defining 3 transitions, and associating them the state machine
# After 30sec, transition from free-flowing to slowing-down, and set traffic light to yellow
traffic_light_fsm.add_transition(
    FSMTransition(
        from_state=free_flowing,
        to_state=slowing_down,
        word_in='t30s',
        word_out='Y'
    )
)

# After 5sec, transition from slowing-down to halted, and set traffic light to red
traffic_light_fsm.add_transition(FSMTransition(slowing_down, halted, 't5s', 'R'))

# After 30sec, transition from halted back to free-flowing, and set traffic light to green
traffic_light_fsm.add_transition(FSMTransition(halted, free_flowing, 't20s', 'G'))

traffic_light_fsm.transitions()
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-15">An alternative method for defining state transitions in an FSM is by using the <code class="code-inline tex2jax_ignore">add_transitions_from_function()</code> method. This approach accepts a callable function that takes two states as arguments: the source state and the target state. The following code demonstrates how this can be implemented.</div>
<div id="sec-modeling-finite-state-machines-5-5-16" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">from sage.combinat.finite_state_machine import FSMTransition

# define state transitions, inputs and outputs
def transit_function(state1, state2):
    if state1=='F':
        if state2 =='S':
            return ('t30s', 'Y')

    elif state1=='S':
        if state2 =='H':
            return ('t5s', 'R')

    elif state1=='H':
        if state2 =='F':
            return ('t20s', 'G')

    # all other 'no-transition' combinations
    return None

traffic_light_fsm.add_transitions_from_function(transit_function)
traffic_light_fsm.transitions()
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-17">Once the states and transitions are defined, the state machine can be run using <code class="code-inline tex2jax_ignore">process()</code> method, which then returns the intermediary outputs during the state machine run.</div>
<div id="sec-modeling-finite-state-machines-5-5-18" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># pass in the initial state and the list of inputs
*_, outputs_history = traffic_light_fsm.process(
    initial_state=free_flowing,
    input_tape=['t30s', 't5s', 't20s'],
)

# print out the outputs of the state machine run
outputs_history
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-19">The <code class="code-inline tex2jax_ignore">graph()</code> command displays the graph representation of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-5-20" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_fsm.graph().show(
    figsize=[6, 6],
    vertex_size=800,
    edge_labels=True,
    vertex_labels=True,
    edge_color=(.2,.4,1),
    edge_thickness=1.0
)
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-21">The <code class="code-inline tex2jax_ignore">FiniteStateMachine</code> class also offers <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> representation of the state machine using the <code class="code-inline tex2jax_ignore">latex_options()</code> method.</div>
<div id="sec-modeling-finite-state-machines-5-5-22" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># define printout options
traffic_light_fsm.latex_options(
    format_state_label=lambda x: x.label(),
)

# display commands
print(latex(traffic_light_fsm))
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-5-23">Note that the <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> printout may not have all elements displayed. However, it can still be customized further. The following figure shows a rendering of the above <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> commands.</div>
<figure class="figure figure-like" id="sec-modeling-finite-state-machines-5-5-24"><div class="image-box" style="width: 67%; margin-left: 16.5%; margin-right: 16.5%;"><img src="external/finite-state-machines/first_traffic_light_FSM.png" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">12.2.3<span class="period">.</span></span><span class="space"> </span>FSM graph output.</figcaption></figure></section><section class="subsection" id="sec-modeling-finite-state-machines-5-6"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">12.2.2.3</span><span class="space"> </span><span class="title">Using `Transducer’ Module</span>
</h4>
<div class="para" id="sec-modeling-finite-state-machines-5-6-2">Sage <code class="code-inline tex2jax_ignore">Transducer</code> is a specialization of the generic <code class="code-inline tex2jax_ignore">FiniteStateMachine</code> class. The <code class="code-inline tex2jax_ignore">Transducer</code> class creates a finite state machine that support optional final states, and whose transitions have input and output labels.</div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-3">Let’s see how to create another state machine using <code class="code-inline tex2jax_ignore">Transducer</code> and for the same traffic light example.</div>
<div id="sec-modeling-finite-state-machines-5-6-4" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># the module allows the instantiation of a state machine by passing
# the entire state machine definition to the constructor
state_machine_definition = {
    # from-state: [
    #   a list of tuples
    #   (to-state, input, output)
    # ]
    'F': [
        ('F', 't5s',  'G'),
        ('F', 't20s', 'G'),
        ('S', 't30s', 'Y'),
    ],
    'S': [
        ('H', 't5s',  'R'),
        ('S', 't20s', 'Y'),
        ('S', 't30s', 'Y'),
    ],
    'H': [
        ('H', 't5s',  'R'),
        ('F', 't20s', 'G'),
        ('H', 't30s', 'R'),
    ],
}

traffic_light_transducer = Transducer(
    state_machine_definition,
    initial_states=['F']
)
traffic_light_transducer
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-5">The member variable <code class="code-inline tex2jax_ignore">input_alphabet</code> lists the set of the transducer inputs set.</div>
<div id="sec-modeling-finite-state-machines-5-6-6" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_transducer.input_alphabet
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-7">The member variable <code class="code-inline tex2jax_ignore">output_alphabet</code> lists the set of the transducer outputs set.</div>
<div id="sec-modeling-finite-state-machines-5-6-8" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_transducer.output_alphabet
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-9">Since a <code class="code-inline tex2jax_ignore">Transducer</code> is also a <code class="code-inline tex2jax_ignore">FiniteStateMachine </code>, the method <code class="code-inline tex2jax_ignore">has_state()</code> can still be used to check whether or not a given state exists in the defined transducer (by passing in the case-sensitive state label).</div>
<div id="sec-modeling-finite-state-machines-5-6-10" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_transducer.has_state('F')
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-11">The function <code class="code-inline tex2jax_ignore">states()</code> enumerates the list of all defined states of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-6-12" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_transducer.states()
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-13">The method <code class="code-inline tex2jax_ignore">initial_states()</code> lists the defined initial state(s) of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-6-14" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_transducer.initial_states()
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-15">After defining the states and transitions, the transducer can be executed using the <code class="code-inline tex2jax_ignore">process()</code> method from the parent <code class="code-inline tex2jax_ignore">FiniteStateMachine</code> class. This method returns the intermediate outputs generated during the execution of the state machine.</div>
<div id="sec-modeling-finite-state-machines-5-6-16" class="ptx-sagecell sagecell-sage"><script type="text/x-sage"># fetching the initial state by its label
free_flowing = traffic_light_transducer.state('F')

# pass in the initial state and the list of inputs
*_, outputs_history = traffic_light_transducer.process(
    initial_state=free_flowing,
    input_tape=['t30s', 't5s', 't20s'],
)

outputs_history
</script></div>
<div class="para" id="sec-modeling-finite-state-machines-5-6-17">The <code class="code-inline tex2jax_ignore">graph()</code> command displays the graph representation of the transducer-based state machine.</div>
<aside class="aside aside-like" id="sec-modeling-finite-state-machines-5-6-18"><h5 class="heading"><span class="title">Notes.</span></h5>
<div class="para" id="sec-modeling-finite-state-machines-5-6-18-2">The <code class="code-inline tex2jax_ignore">latex_options()</code> method of the base class <code class="code-inline tex2jax_ignore">FiniteStateMachine</code> also is inherited and can also be used with <code class="code-inline tex2jax_ignore">Transducer</code> state machine to output <span class="latex-logo">L<span class="A">a</span>T<span class="E">e</span>X</span> representation.</div></aside><div id="sec-modeling-finite-state-machines-5-6-19" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">traffic_light_transducer.graph().show(
    figsize=[6, 6],
    vertex_size=800,
    edge_labels=True,
    vertex_labels=True,
    edge_color=(.2,.4,1),
    edge_thickness=1.0
)
</script></div></section></section><section class="conclusion" id="sec-modeling-finite-state-machines-6"><div class="para" id="sec-modeling-finite-state-machines-6-1">The above are basic commands with a typical workflow of defining and running of simple finite state machines. The general structure of the state machine can be adapted to fit different use cases. The examples shown can be customized and fine-tuned to reflect more complex scenarios (more states, different input sequences, etc.)</div></section></section></div>
<div class="ptx-content-footer">
<a class="previous-button button" href="sec-state-machine-definition.html" title="Previous"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cb;</span><span class="name">Prev</span></a><a class="top-button button" href="#" title="Top"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5ce;</span><span class="name">Top</span></a><a class="next-button button" href="sec-fsm-in-action.html" title="Next"><span class="name">Next</span><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cc;</span></a>
</div></main>
</div>
<div id="ptx-page-footer" class="ptx-page-footer">
<a class="pretext-link" href="https://pretextbook.org" title="PreTeXt"><div class="logo"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="338 3000 8772 6866" role="img"><title>PreTeXt logo</title><g style="stroke-width:.025in; stroke:currentColor; fill:none"><polyline points="472,3590 472,9732 " style="stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; "></polyline><path style="stroke-width:126;stroke-linecap:butt;" d="M 4724,9448 A 4660 4660  0  0  1  8598  9259"></path><path style="stroke-width:174;stroke-linecap:butt;" d="M 4488,9685 A 4228 4228  0  0  0   472  9732"></path><path style="stroke-width:126;stroke-linecap:butt;" d="M 4724,3590 A 4241 4241  0  0  1  8598  3496"></path><path style="stroke-width:126;stroke-linecap:round;" d="M 850,3496  A 4241 4241  0  0  1  4724  3590"></path><path style="stroke-width:126;stroke-linecap:round;" d="M 850,9259  A 4507 4507  0  0  1  4724  9448"></path><polyline points="5385,4299 4062,8125" style="stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8598,3496 8598,9259" style="stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="850,3496 850,9259" style="stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="4960,9685 4488,9685" style="stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="3070,4582 1889,6141 3070,7700" style="stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="6418,4582 7600,6141 6418,7700" style="stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8976,3590 8976,9732" style="stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><path style="stroke-width:174;stroke-linecap:butt;" d="M 4960,9685 A 4228 4228  0  0  1  8976  9732"></path></g></svg></div></a><a class="runestone-link" href="https://runestone.academy" title="Runestone Academy"><img class="logo" src="https://runestone.academy/runestone/static/images/RAIcon_cropped.png" alt="Runstone Academy logo"></a><a class="mathjax-link" href="https://www.mathjax.org" title="MathJax"><img class="logo" src="https://www.mathjax.org/badge/badge-square-2.png" alt="MathJax logo"></a>
</div>
</body>
</html>
